# Базовый докер образ:

```dockerfile
#FROM <image>:<image tag>
FROM ubuntu:18.04  # на базе вот этого образа я буду создавать свой образ
COPY . /app  # Скопируй вот это содержимое в папку /app
```


Пример сложного докерфайла:
```dockerfile
# на основе облегчённой версии python 3.7.2
FROM python:3.7.2-alpine3.8

# Метаинфо (с кем можно связаться для консультации по этому образу)
LABEL maintainer="jeffmshale@gmail.com"

# добавляем переменную окружения на глобальный уровень всего образа.
# Не в .env файла, а именно глобально на весь образ
# НИКОГДА НЕ ПЕРЕДАЁМ СЮДА РЕАЛЬНЫЕ ЗНАЧЕНИЯ, СТАВИМ ТОЛЬКО ЗАГЛУШКИ!!!!!
# Эти переменные можно и в частых случаях нужно переопределять при запуске
ENV ADMIN="jeff"

# Запускает n команд для:
# apk update -- подтянуть обновлённые индексы для пакетов
# apk upgrade -- установит новые апдейты
# apk add bash -- добавит bash терминал(если его нет)
# shell формат. Зависит от оболочки. Поддерживат работу с || && | >
# за счёт этого можно описывать сложные команды. Но есть зависимость
# от оболочки, нужно быть внимательным
RUN apk update \
    && apk upgrade \
    && apk add bash

# скопируй всё из точки запуска в некую папку /app (создай её, если ещё нет)
#COPY <from local> <to image>
COPY . ./app

# похожа на команду COPY, но ADD так же умеет распаковывать архивы,
# скачивать данные по ссылкам (!!!!! Лучше самому отдельно скачать
# ресурс, добавить его через COPY !!!!!)
# ADD <что> <куда(в образ)>
ADD https://raw.githubusercontent.com/discdiver/pachy-vid/master/sample_vids/vid1.mp4 \
/my_app_directory

# создание новой дирректории(папки)
# этот формат RUN -- exec форма (массив с аргументами)
# Нет возможности работать с || && | >. Их просто нет.
# Нет зависимости от оболочки. Команда выполняется напрямую в OS
RUN ["mkdir", "/a_directory"]

# Определяет команду, которая должна будет запуситься при docker run. 
# То, что мы определяем в CMD на этапе docker run можно переопределить
CMD ["python", "./my_script.py"]
```


НЕ ЭТАЛОН, но как можно (предпочтительнее) строить Dockerfile:

1. Сперва какая-то основа образа:
    * указать базовый образ (FROM)
    * Указать \ установить рабочую дирректорию (WORKDIR)
    * Указать (если надо) переменные среды (ENV)
    * Указать (если надо) локальные переменные для сборки образа (ARG)

2. После основы можно перейти на настройку и зависимости
    * Обновить нужные пакеты, установить нужные библиотеки \ зависимоси (RUN)
    * Скопировать необходимые файлы проекта (COPY)

3. Дополнительная конфигурация образа:
    * Установка внутренних портов будущего контейнера (EXPOSE)
    * Установка томов хранения для файлов \ результатов вычислений, которые нельзя
        потерять после закрытия контейнера (VOLUME)

4. Итоговые команды, что при запуске нужно делать
   * Указание контейнеру, что за процесс он должен начать исполнять (CMD или/и ENTRYPOINT)









